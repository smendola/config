#!/bin/sh
cd $HOME

# This script pulls in my dots2 and bin configurations.

# For each repo, start with https protocol, which requires password auth;
# then remove the https remote url, and replace it with ssh, which uses
# private key; private key is part of configuration that is pulled, so
# that's why the two-phase business.
mkdir -p $HOME/.config.git/
alias dots='git --git-dir=$HOME/.config.git/ --work-tree=$HOME'
dots init
dots remote add origin https://smendola@bitbucket.org/smendola/dots2.git
dots pull origin master
chmod og-r .ssh/id_rsa
dots remote rm origin
dots remote add origin git@bitbucket.org:smendola/dots2.git


git clone https://smendola@bitbucket.org/smendola/bin.git
cd bin
git remote rm origin
git remote add origin git@bitbucket.org:smendola/bin.git